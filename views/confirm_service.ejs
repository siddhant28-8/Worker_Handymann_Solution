<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Confirm your service</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    
    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>
  body {
            background-color: #E7E7E7;
            color: #333; /* Standard text color */
            font-size: 16px; /* Standard text size */
            line-height: 1.5;
            /* CRITICAL: Use a clear, non-serif font for numbers/text in inputs */
            font-family: Arial, Helvetica, sans-serif, monospace; 
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        .container-fluid{
          padding-top:30px;
          padding-bottom:30px;
        }
        .card {
      position: relative;
      background-color: #E7E7E7;
      max-width: 325px;
      width: 325px;
      margin: 25px;
      border:none;
      border-radius: 10px;
      overflow: hidden;
    }

    .card-image {
      max-height: 200px;
      text-align: center;
    }

    .card-image img {
      height: 160px;
      width: 160px;
      border-radius: 50%;
    }

    .card-info {
      text-align: center;
      color: #222;
      padding: 10px 20px 20px;
    }

    .card-info p {
      font-size: 1em;
      margin-bottom: 5px;
    }

</style>
</head>
<body>
 <div style="display: flex; justify-content: space-between; align-items: center; padding: 0 100px;padding-top:5px">
  <h3 style="font-weight:700px;font-size:32px;font:Lora;color:#9100FF">Confirm your details</h3>
  <a href="/User_Dashboard" style="font-weight:400px;font:Lora;color:#9100FF">Back to dashboard</a>
</div>

<div class="container-fluid" >
  <div class="row justify-content-center">
    <div class="col-md-4">
        <div class="card">
          <div class="card-image">
            <img src="<%= worker.picture %>" alt="Worker Image">
          </div>

          <div class="card-info">
            <p style="font-weight: 400;">
              <b><%= worker.firstname %> <%= worker.surname %></b>
            </p>
            <div class="info">
              <p class="desig" style="padding-top: 5px;">
                <%= worker.work_type %> |
                <img height="15px" width="15px" src="./icons8-location-40.png" alt="location">
               <%= worker.state %>
              </p>
            </div>
            <div class="info">
              <p class="desig" style="padding-top: 5px;">
                <img height="15px" width="15px" src="./icons8-star-30.png" alt="star"> 4.5 | 3 Pending
              </p>
            </div>
          </div>
        </div>
    </div>
    <div class="col-md-8" style="border-left:1px solid black;padding:0 50px;">
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">Address:</div>
        <div class="col-9 justify-content-start"><%= user.address %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">City:</div>
        <div class="col-9 justify-content-start"><%= user.city %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">State:</div>
        <div class="col-9 justify-content-start"><%= user.state %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">Landmark:</div>
        <div class="col-9 justify-content-start"><%= user.landmark %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">Pin Code:</div>
        <div class="col-9 justify-content-start"><%= user.pincode %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">Type of Service:</div>
        <div class="col-9 justify-content-start"><%= user.service_type %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">Date of Service:</div>
        <div class="col-9 justify-content-start"><%= user.service_date %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">Time of Service:</div>
        <div class="col-9 justify-content-start"><%= user.service_time %></div>
      </div>
      <div class="row mb-2">
        <div class="col-3 font-weight-bold">Description:</div>
        <div class="col-9 justify-content-start"><%= user.service_description %></div>
      </div>
    </div>
  </div>
</div>
<div class="btn" style="display:flex;justify-content:center">
  <button class="proceed-btn" style="padding:5px 10px;color:#E7E7E7;background-color:black" worker_info='<%- JSON.stringify(worker) %>' user_info='<%- JSON.stringify(user) %>'>Proceed</button>
</div>
 
<script>
   document.querySelectorAll('.proceed-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const worker_info = JSON.parse(btn.getAttribute('worker_info'));
      const user_info = JSON.parse(btn.getAttribute('user_info'));
      add_notification(worker_info, user_info);
    });
  });

  function add_notification(worker_info, user_info) {
    fetch('/add_notification', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({ worker_info, user_info }),
})
.then(res => res.json())
.then(data => {
  if (data.redirect) {
    window.location.href = data.redirect;
  }
})
.catch(err => console.error(err));

  }
</script>
</body>
</html>
